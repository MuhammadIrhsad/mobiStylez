<!DOCTYPE html>
<html lang="en">

<head>

    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Mobi Stylez Barber Shope</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/fontawesome.min.css" integrity="sha384-jLKHWM3JRmfMU0A5x5AkjWkw/EYfGUAGagvnfryNV3F9VqM98XiIH7VBGVoxVSc7" crossorigin="anonymous">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link href="https://fonts.googleapis.com/css2?family=Qwigley&family=The+Nautigal&display=swap" rel="stylesheet">
        <!-- <link rel="stylesheet" href="./css/homeStyle.css"> -->
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
        <link href="https://fonts.googleapis.com/css2?family=Qwigley&family=Raleway:wght@100;300&family=The+Nautigal&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    </head>

    <title>Mobi Stylez Stylists</title>
    <style>
        * {
            padding: 0;
            margin: 0;
        }

        body {
            box-sizing: border-box;
            background-color: white;
        }

        h7 {
            font-size: .8rem;
        }

        .btn {
            line-height: .6;
        }

        #post-section::-webkit-scrollbar {
            width: 0px;

        }
    </style>
</head>

<body>
    <?php
    include "config.php";
    include "header.php";
    ?>
    <div class="container-fluid d-flex justify-content-center bg-light ">
        <h1 style="color: rgb(146, 121, 9) ;font-family: 'Qwigley', sans-serif; font-size: 5rem;">Our Stylist</h1>
    </div>
    <!-- Horizontal stylist list container -->
    <div class="container-fluid bg-white">
        <!-- Horizontal 1st row -->
        <div class="row text-center">
            <!-- stylist elements -->
            <div class="col">
                <div class="row d-flex justify-content-center" style="width: 100vw;">
                    <div class="col m-1 d-none d-sm-block ">
                        <div class="row border p-1">
                            <div class="col-4 d-block my-auto">
                                <img src="./barberImages/Rectangle -1.png" class="img-fluid rounded-circle" alt="">
                            </div>
                            <div class="col-8 d-block my-auto text-start">
                                <h7>james Martin</h7>
                                <div class="rating">
                                    <span class="text-warning fa fa-star checked"> 4.5</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col m-1 d-none d-sm-block ">
                        <div class="row border p-1">
                            <div class="col-4 d-block my-auto">
                                <img src="./barberImages/Rectangle -2.png" class="img-fluid rounded-circle" alt="">
                            </div>
                            <div class="col-8 d-block my-auto text-start">
                                <h7>james Martin</h7>
                                <div class="rating">
                                    <span class="text-warning fa fa-star checked"> 4.5</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col m-1 d-none d-sm-block ">
                        <div class="row border p-1">
                            <div class="col-4 d-block my-auto">
                                <img src="./barberImages/Rectangle -3.png" class="img-fluid rounded-circle" alt="">
                            </div>
                            <div class="col-8 d-block my-auto text-start">
                                <h7>james Martin</h7>
                                <div class="rating">
                                    <span class="text-warning fa fa-star checked"> 4.5</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col m-1  d-none d-md-block">
                        <div class="row border p-1">
                            <div class="col-4 d-block my-auto">
                                <img src="./barberImages/Rectangle -4.png" class="img-fluid rounded-circle" alt="">
                            </div>
                            <div class="col-8 d-block my-auto text-start">
                                <h7>james_Martin</h7>
                                <div class="rating">
                                    <span class="text-warning fa fa-star checked"> 4.5</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col m-1 d-none d-lg-block">
                        <div class="row border p-1">
                            <div class="col-4 d-block my-auto">
                                <img src="./barberImages/Rectangle -8.png" class="img-fluid rounded-circle" alt="">
                            </div>
                            <div class="col-8 d-block my-auto text-start">
                                <h7>james Martin</h7>
                                <div class="rating">
                                    <span class="text-warning fa fa-star checked"> 4.5</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col m-1 d-none d-lg-block">
                        <div class="row border p-1">
                            <div class="col-4 d-block my-auto">
                                <img src="./barberImages/Rectangle -6.png" class="img-fluid rounded-circle" alt="">
                            </div>
                            <div class="col-8 d-block my-auto text-start">
                                <h7>james Martin</h7>
                                <div class="rating">
                                    <span class="text-warning fa fa-star checked"> 4.5</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Stylist Post show container -->
    <main class="container mt-4 bg-white text-center position-relative   d-flex justify-content-around ">

        <!-- stylist-post container -->
        <div class="col-md-12 col-lg-6 bg-white p-0">
            <div class="row ">
                <!-- UserPost section -->
                <div class="user-post col-12 bg-white " id="post-section" style="height: 100vh; overflow:auto">
                    <!-- Write Post -->
                    <?php if (isset($_SESSION['id'])) {
                        $sql = "SELECT * FROM user WHERE user_id={$_SESSION['id']}";
                        $result = mysqli_query($conn, $sql);
                        $row = mysqli_fetch_assoc($result);

                    ?>
                        <div class="col-sm-12 border mb-4  rounded d- flex justify-content-center align-items-center p-3" style="box-shadow:1px 1px 5px rgb(149, 140, 140);">
                            <div class="row">
                                <div class="col-1 my-auto mx-1">
                                    <div class="user-image" style="width: 40px; height: 40px;">
                                        <img src="<?php echo $hostName . 'upload/' . $row['user_image'] ?>" class=" rounded-circle" style="width: 100%;height:100%" alt="">
                                        <p hidden id="current_user"><?php echo $_SESSION['user'] ?></p>
                                        <p hidden id="hostUser"><?php echo $hostName ?></p>
                                        <p hidden id="current_uId"><?php echo $_SESSION['id'] ?></p>
                                    </div>
                                </div>
                                <div class="col-10 m-auto">
                                    <form>

                                        <input type="text" disabled style=" color:rgb(0, 0, 0,.5);" class=" form-control rounded-pill" data-bs-toggle="modal" data-bs-target="#postModal" data-bs-whatever="@mdo" value="Enter what's in your mind" aria-label="Recipient's username" aria-describedby="basic-addon2">


                                    </form>
                                </div>
                            </div>
                        </div>

                        <!-- Input Model  -->

                        <div class="modal fade" id="postModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog model-dialog-center">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="exampleModalLabel">New Post</h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                        <form id="postForm" method="post" enctype="multipart/form-data">
                                            <div class="form-group" hidden>
                                                <label for="des">Post Description</label>
                                                <input type="text" class="form-control " id="post-author" name="author" value="<?php echo $row['user_id'] ?>" placeholder="Write from here..." required />
                                            </div>
                                            <div class="form-group">
                                                <label for="exampleFormControlTextarea1">Post Description</label>
                                                <textarea class="form-control" name="description" id="exampleFormControlTextarea1" required rows="3"></textarea>
                                            </div>
                                            <div class="mb-3">
                                                <label for="formFile" class="form-label">Post Image</label>
                                                <input class="form-control" name="postImage" type="file" id="formFile" required>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" id="close" class="btn-sm btn-danger" data-bs-dismiss="modal">Close</button>
                                                <!-- <button type="submit" id="send" class="btn-sm btn-primary">Send Post</button> -->
                                                <input type="submit" name="" class="btn-sm bg-danger btn-danger" value="send" id="sendPost">
                                            </div>
                                        </form>

                                    </div>
                                </div>
                            </div>
                        </div>
                    <?php } ?>

                    <!-- post -->
                    <!-- <div class="col-sm-12 border  rounded " style="box-shadow:1px 1px 5px rgb(149, 140, 140);">
                        
                        <div class="post-title-bar d-flex justify-content-evenly">
                            <div id="user-profile" class=" ms-1 d-flex align-items-center " style="width: 50%;">
                                <div class="user-image" style="width: 40px; height: 40px;">
                                    <img src="./barberImages/Rectangle -6.png" class=" rounded-circle" style="width: 100%;" alt="">
                                </div>
                                <div id="user-name" class="mx-2 pt-4" style="font-size: 14px;">
                                    <a href="./stylistInfo.html" class="w-100 mb-0  " style="font-size:1.2rem; font-family:'Raleway';">james_Martin</a>
                                    <p><i class="fa fa-star me-1 text-warning"></i><span>4.5</span> </p>
                                </div>

                                <button class="btn-sm btn-danger">
                                    follow
                                </button>

                            </div>
                            <div class="edit-icon my-auto text-end" style="width: 40%;">
                                <button style="background: none; outline: none ;border:none;">


                                    <i class="bi bi-three-dots-vertical"></i>
                                </button>

                            </div>

                        </div>
                        <div id="postText" class="text-start px-4 py-1">Lorem ipsum dolor sit amet consectetur adipisicing elit. Aspernatur, quo veniam, numquam, totam debitis ab cum dignissimos commodi placeat magnam at! Sequi rerum provident a minima, distinctio iste exercitationem fugit!</div>

                     
                        <div class="col-12 ">
                            <img style="width: 100%;" src=" ./barberImages/image2.png " alt=" ">

                        </div>
                        <div class="bottom-icons d-flex justify-content-between" style=" width: 100%;">
                            <div class="text-start m-2">
                                <div class="btn-sm btn-transparent d-inline" style="font-size: 25px;" id="likeBtn"><i class="fa-regular fa-heart"></i></div>
                                <div class="btn-sm btn-transparent d-inline" style="font-size: 25px;" id="commentBtn"><a href="#commentInput"><i class="bi bi-chat-dots"></i></a></div>
                                <p class="m-0" style="font-size: 14px; font-family: 'Raleway' ,sans-serif;"><b>250 likes</b></p>
                                <!-- <a class="text-dark " style="font-size: 12px; ">we all comments</a> 

                            </div>

                            <p class=" m-2 "><i class="fas fa-brush"></i></p>


                        </div>
                        <div style="max-height: 100px;width:100%;overflow:auto">
                            <p class="mb-0" style=" font-family: 'Raleway' ,sans-serif; font-size: 14px;"><b class="me-1 mb-0">Johon_Will </b> love this style</p>
                            <p style=" font-family: 'Raleway' ,sans-serif; font-size: 9px;">2 hourse ago</p>

                            <p class="mb-0" style=" font-family: 'Raleway' ,sans-serif; font-size: 14px;"><b class="me-1 mb-0">Johon_Will </b> love this style</p>
                            <p style=" font-family: 'Raleway' ,sans-serif; font-size: 9px;">2 hourse ago</p>
                        </div>
                        <div class="d-flex justify-content-between ">
                            <div class='input-group m-1 '>
                                <input id='current_comment' type='text' class='rounded-pill form-control' placeholder='Write your comment..' aria-label='Dollar amount (with dot and two decimal places)'>
                                <span class='input-group-text outline-0 border-0 bg-0 bg-white '>
                                    <button type='submit' class='btn-sm btn-transparent border-0 outline-0 bg-white'><i style='font-size:15px' class=' text-danger fa-solid fa-paper-plane'></i></button>
                                </span>
                            </div>

                        </div>

                    </div>-->

                    <button class="btn btn-danger my-4" id="loadbtn" data-id="">Load More</button>
                </div>

            </div>
        </div>
        <div class=" col-lg-4 bg-white border box-shadow  d-none d-lg-block " style="height: 100vh; ">
            <div class="heading d-flex justify-content-between align-items-center mt-2 px-2 mx-0 ">
                <h4>Popular stylist</h4>
                <h4 class="mt-2"><i class="bi bi-search"></i></h4>
            </div>
            <hr>
            <div class="stylist">
                <div id="user-profile" class=" ms-1 mb-0 d-flex align-items-center justify-content-between " style="width: 100%;">
                    <div class=" mx-3 profile d-flex align-items-center">
                        <div class="user-image" style="width: 40px; height: 40px;">
                            <img src="./barberImages/Rectangle -6.png" class=" rounded-circle" style="width: 100%;" alt="">
                        </div>
                        <div id="user-name" class="mx-2 pt-4" style="font-size: 14px;">
                            <p class="w-100 mb-0  " style="font-size: 18px;">Johon_Smith</p>
                            <p><i class="fa fa-star me-1 text-warning"></i><span>4.5</span> <span>| New York</span> </p>
                        </div>
                    </div>
                    <button class="btn btn-danger mx-3" style=" width: 60px; font-size: 14px;">
                        follow
                    </button>

                </div>
                <div id="user-profile" class=" ms-1 mb-0 d-flex align-items-center justify-content-between " style="width: 100%;">
                    <div class=" mx-3 profile d-flex align-items-center">
                        <div class="user-image" style="width: 40px; height: 40px;">
                            <img src="./barberImages/Rectangle -6.png" class=" rounded-circle" style="width: 100%;" alt="">
                        </div>
                        <div id="user-name" class="mx-2 pt-4" style="font-size: 14px;">
                            <p class="w-100 mb-0  " style="font-size: 18px;">Johon_Smith</p>
                            <p><i class="fa fa-star me-1 text-warning"></i><span>4.5</span> <span>| New York</span> </p>
                        </div>
                    </div>
                    <button class="btn btn-danger mx-3" style=" width: 60px; font-size: 14px;">
                        follow
                    </button>

                </div>
                <div id="user-profile" class=" ms-1 mb-0 d-flex align-items-center justify-content-between " style="width: 100%;">
                    <div class=" mx-3 profile d-flex align-items-center">
                        <div class="user-image" style="width: 40px; height: 40px;">
                            <img src="./barberImages/Rectangle -6.png" class=" rounded-circle" style="width: 100%;" alt="">
                        </div>
                        <div id="user-name" class="mx-2 pt-4" style="font-size: 14px;">
                            <p class="w-100 mb-0  " style="font-size: 18px;">Johon_Smith</p>
                            <p><i class="fa fa-star me-1 text-warning"></i><span>4.5</span> <span>| New York</span> </p>
                        </div>
                    </div>
                    <button class="btn btn-danger mx-3" style=" width: 60px; font-size: 14px;">
                        follow
                    </button>

                </div>
                <div id="user-profile" class=" ms-1 mb-0 d-flex align-items-center justify-content-between " style="width: 100%;">
                    <div class=" mx-3 profile d-flex align-items-center">
                        <div class="user-image" style="width: 40px; height: 40px;">
                            <img src="./barberImages/Rectangle -6.png" class=" rounded-circle" style="width: 100%;" alt="">
                        </div>
                        <div id="user-name" class="mx-2 pt-4" style="font-size: 14px;">
                            <p class="w-100 mb-0  " style="font-size: 18px;">Johon_Smith</p>
                            <p><i class="fa fa-star me-1 text-warning"></i><span>4.5</span> <span>| New York</span> </p>
                        </div>
                    </div>
                    <button class="btn btn-danger mx-3" style=" width: 60px; font-size: 14px;">
                        follow
                    </button>

                </div>
                <div id="user-profile" class=" ms-1 mb-0 d-flex align-items-center justify-content-between " style="width: 100%;">
                    <div class=" mx-3 profile d-flex align-items-center">
                        <div class="user-image" style="width: 40px; height: 40px;">
                            <img src="./barberImages/Rectangle -6.png" class=" rounded-circle" style="width: 100%;" alt="">
                        </div>
                        <div id="user-name" class="mx-2 pt-4" style="font-size: 14px;">
                            <p class="w-100 mb-0  " style="font-size: 18px;">Johon_Smith</p>
                            <p><i class="fa fa-star me-1 text-warning"></i><span>4.5</span> <span>| New York</span> </p>
                        </div>
                    </div>
                    <button class="btn btn-danger mx-3" style=" width: 60px; font-size: 14px;">
                        follow
                    </button>

                </div>
                <div id="user-profile" class=" ms-1 mb-0 d-flex align-items-center justify-content-between " style="width: 100%;">
                    <div class=" mx-3 profile d-flex align-items-center">
                        <div class="user-image" style="width: 40px; height: 40px;">
                            <img src="./barberImages/Rectangle -6.png" class=" rounded-circle" style="width: 100%;" alt="">
                        </div>
                        <div id="user-name" class="mx-2 pt-4" style="font-size: 14px;">
                            <p class="w-100 mb-0  " style="font-size: 18px;">Johon_Smith</p>
                            <p><i class="fa fa-star me-1 text-warning"></i><span>4.5</span> <span>| New York</span> </p>
                        </div>
                    </div>
                    <button class="btn btn-danger mx-3" style=" width: 60px; font-size: 14px;">
                        follow
                    </button>

                </div>
            </div>
        </div>
    </main>

</body>
<script src="./js/bootstrap.bundle.min.js "></script>
<script src="./js/jquery-3.6.0.js"></script>
<script>
    
    $("document").ready(function() {
        var current_u = $("#current_user").html(); //document.getElementById("current_user").innerHTML;
        var current_uId =$("#current_uId").html(); //document.getElementById("current_uId").innerHTML;
        var hostUser = $("#hostUser").html();// document.getElementById("hostUser").innerHTML;

        $("body").on("click", ".sendComment", function(e) {
            e.preventDefault();
            var send_id = $(this).data("sendcont");
            // var commentContent = sendComment;
            var comment = `[data-comcont=${send_id}]`;
            var newComment = `[data-comsec=${send_id}]`;

            var comment_content = $(comment).val();
            if (comment_content != "") {
                $.ajax({
                    url: "load-comment.php",
                    type: "POST",
                    data: {
                        postComment: comment_content,
                        commentpost: send_id,

                    },
                    success: function(result) {
                        if (result == 1) {
                            var newcom = `<div><p class='mb-0' style=' font-family: 'Raleway' ,sans-serif; font-size: 14px;'><b class='me-1 ral mb-0'><a href='${hostUser}/stylistInfo.php?id=${current_uId}'>${current_u}</a></b>${comment_content}</p><p style=' font-family: 'Raleway' ,sans-serif; font-size: 9px;'>1 min ago</p></div>`;
                            console.log(comment_content);
                            // alert("you have clicked on: " + send_id + " " + comment_content);
                            // alert(comment);
                            $(comment).val("");
                            $(newComment).append(newcom);

                        } else {
                            alert("You Operation is faild" + result);
                        }
                    }
                })
            } else {
                alert("Plz enter your comment")
            }



        });

        //Post Like 
        $("body").on("click", ".likeBtn", function(e) {
            var solidHeart = "<i class='fa-solid fa-heart'></i>";
            var regularHeart = "<i class='fa-regular fa-heart'></i>";
            var likeId = $(this).data("likeid");
            var like = `[data-likeid=${likeId}]`;
            var total_likes=`[data-totallike=${likeId}]`;

            $.ajax({
                url: "save-like.php",
                type: "POST",
                data: {
                    like_id: likeId
                },
                success: function(result) {
                    var totalNum=$(total_likes).html().split(" ");
                   var totalLike=parseInt(totalNum[0]);
                    if (result == 1) {
                        $(like).html(solidHeart);
                        totalLike++;
                        $(total_likes).html(totalLike+" Likes");
                    } else if (result == 2) {
                        totalLike--;
                        $(total_likes).html(totalLike+" Likes")
                        $(like).html(regularHeart);
                    } else {
                        alert("You first have to Sign into account.");

                        alert("You can't follow the user:" + followId);
                    }
                   
                   
                },
            });
        });
        //Post Follow
        $("body").on("click", ".follow", function(e) {
            if (confirm("Do you want to continue with this action?")) {
                var followId = $(this).data("id");
                $.ajax({
                    url: "save-follow.php",
                    type: "POST",
                    data: {
                        follow_id: followId
                    },
                    success: function(result) {
                        if (result == 1) {
                            var dataId = `[data-id=${followId}]`;
                            console.log(dataId);
                            $(dataId).html("following");
                            $(dataId).removeClass("bg-danger");
                            $(dataId).addClass("bg-primary");



                        } else if (result == 2) {
                            var dataId = `[data-id=${followId}]`;
                            console.log(dataId);
                            $(dataId).html("follow");
                            $(dataId).removeClass("bg-primary");
                            $(dataId).addClass("bg-danger");


                        } else {

                            alert("You can't follow the user:" + followId);
                        }
                    },
                });
            }

        });
        
        function loadData(page=0) {
            $.ajax({
                url: "load-post.php",
                type: "POST",
                data: {
                    page_no: page
                },
                success: function(data) {
                    if (data != "") {
                        $("#loadbtn").remove();
                        $("#post-section").append(data);
                    } else {
                        $("#loadbtn").prop("disabled", true);
                        $("#loadbtn").html("Finished");
                    }
                }
            })
        }
        loadData();
        $("body").on("click", "#loadbtn", function() {
            $("#loadbtn").html("Loading...");
            var page_id = $(this).data("id");
            loadData(page_id);
        })
        $("#postForm").on("submit", function(e) {
            e.preventDefault();
            var form_Data = new FormData(this);
            $.ajax({
                url: "save-post.php",
                type: "POST",
                data: form_Data,
                contentType: false,
                processData: false,
                success: function(data) {
                    // $("#postModal").modal('hide')
                    if (data == 1) {
                        $("#close").click();
                        $("#postForm").trigger("reset");
                        loadData();
                    } else {
                        alert(data);
                    }
                }
            })
        })

    });
</script>



</html>